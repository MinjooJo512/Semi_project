# element not interactable 에러 메시지 이슈  ->  WebDriverWait 추가하는 것으로 해결
import time
from selenium import webdriver
from selenium.webdriver.common.by import By
from selenium.webdriver.support.ui import WebDriverWait
from selenium.webdriver.support import expected_conditions as EC
import pandas as pd

# Selenium WebDriver 설정
driver = webdriver.Chrome()
driver.get(url)

df_review_cos1 = pd.DataFrame(columns=['date', 'rate', 'id', 'select_1_title', 'select_1_content', 'select_2_title', 'select_2_content', 'select_3_title', 'select_3_content', 'txt'])

# 리뷰 탭 클릭
review_tab = WebDriverWait(driver, 10).until(
    EC.element_to_be_clickable((By.CSS_SELECTOR, 'a.goods_reputation'))
)
review_tab.click()
time.sleep(1)

# 리뷰 필터 탭 클릭
filter_tab = WebDriverWait(driver, 10).until(
    EC.element_to_be_clickable((By.CSS_SELECTOR, 'div#searchType button.btnOption'))
)
filter_tab.click()
time.sleep(1)

# 필터 팝업이 나타날 때까지 대기
filter_popup = WebDriverWait(driver, 10).until(
    EC.presence_of_element_located((By.CSS_SELECTOR, 'div.popCont'))
)

# 2점 필터 클릭
two_point_label = WebDriverWait(driver, 10).until(
    EC.element_to_be_clickable((By.CSS_SELECTOR, 'label[for="point_type1_5"]'))
)
two_point_label.click()
time.sleep(1)

# 1점 필터 클릭
one_point_label = WebDriverWait(driver, 10).until(
    EC.element_to_be_clickable((By.CSS_SELECTOR, 'label[for="point_type1_6"]'))
)
one_point_label.click()
time.sleep(1)

# 적용 버튼 클릭
apply_button = WebDriverWait(driver, 10).until(
    EC.element_to_be_clickable((By.CSS_SELECTOR, 'div.area1sButton a#btnFilterConfirm'))
)
apply_button.click()
time.sleep(1)

print("부정 리뷰 선택 완료")
